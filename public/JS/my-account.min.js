import{initializeApp as b}from"https://www.gstatic.com/firebasejs/9.8.2/firebase-app.js";import{getAnalytics as c}from"https://www.gstatic.com/firebasejs/9.8.2/firebase-analytics.js";import{doc as d,getDoc as e,deleteDoc as h,getFirestore as f}from"https://www.gstatic.com/firebasejs/9.8.2/firebase-firestore.js";let hashedP,store,firebaseConfig={apiKey:"AIzaSyBz1kOpHGbECrAVDQAQN217ycfbM0VjC20",authDomain:"english-quizzz.firebaseapp.com",projectId:"english-quizzz",storageBucket:"english-quizzz.appspot.com",messagingSenderId:"531636974687",appId:"1:531636974687:web:987866ab854ddf5f9597ea",measurementId:"G-0GCR06880E"},app=b(firebaseConfig),analytics=c(app),db=f();if("yes"!=localStorage.getItem("userloggedin"))alert("Please login"),window.open("/login","_parent");else{var g=d(db,"UsersList",localStorage.getItem("email"));let a=await e(g);a.exists()?(document.getElementById("fname-con").innerHTML=a.data().UserFirstName,document.getElementById("lname-con").innerHTML=a.data().UserLastName,document.getElementById("email-con").innerHTML=a.data().UserEmail):(alert("You hacked you are not a real user"),localStorage.clear(),window.open("/","_parent"))}async function deleteAccount(){var a=d(db,"UsersList",localStorage.getItem("email"));let b=await e(a);if(!b.exists()){alert("No account found!!");return}await h(a).then(()=>{localStorage.clear(),alert("Your account has been deleted successfully. We are unhappy to miss a user like you."),window.open("/","_parent")}).catch(a=>{alert("Account deleting unsuccessful. Please contact the developer!!")})}document.getElementById("delaccbtn").addEventListener("click",async()=>{if(confirm("You are about to delete your account. This action cannot be reversed.")){store=prompt("Please enter your password to continue.");var b,a=await e(d(db,"UsersList",localStorage.getItem("email")));await fetch("/hash/"+store).then(a=>a.json()).then(a=>{hashedP=a.hashedPassword}).catch(a=>{console.log(a)}),hashedP==a.data().UserPassword?deleteAccount():(alert("Incorrect password!"),localStorage.clear(),window.open("/","_parent"))}}),document.getElementById("logoutbtn").addEventListener("click",()=>{confirm("Are you sure you want to logout?")&&(localStorage.clear(),window.open("/","_parent"))})
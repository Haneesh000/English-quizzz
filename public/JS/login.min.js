import{initializeApp as a}from"https://www.gstatic.com/firebasejs/9.8.2/firebase-app.js";import{getAnalytics as b}from"https://www.gstatic.com/firebasejs/9.8.2/firebase-analytics.js";import{doc as d,getDoc as e,getFirestore as c}from"https://www.gstatic.com/firebasejs/9.8.2/firebase-firestore.js";let firebaseConfig={apiKey:"AIzaSyBz1kOpHGbECrAVDQAQN217ycfbM0VjC20",authDomain:"english-quizzz.firebaseapp.com",projectId:"english-quizzz",storageBucket:"english-quizzz.appspot.com",messagingSenderId:"531636974687",appId:"1:531636974687:web:987866ab854ddf5f9597ea",measurementId:"G-0GCR06880E"},hashedP="",app=a(firebaseConfig),analytics=b(app),db=c();function change(){"text"==document.querySelector("#passwordbox").getAttribute("type")?document.querySelector("#passwordbox").setAttribute("type","password"):"password"==document.querySelector("#passwordbox").getAttribute("type")&&document.querySelector("#passwordbox").setAttribute("type","text")}document.getElementById("showpassword").addEventListener("click",change);var emailbox=document.getElementById("emailbox"),passwordbox=document.getElementById("passwordbox");async function LoginUser(b,c){let f=b.toLowerCase();await fetch("/hash/"+c).then(a=>a.json()).then(a=>{hashedP=a.hashedPassword}).catch(a=>{console.log(a)});var g=d(db,"UsersList",f);let a=await e(g);a.exists()?a.data().UserPassword==hashedP?(localStorage.setItem("userloggedin","yes"),localStorage.setItem("firstName",a.data().UserFirstName),localStorage.setItem("lastName",a.data().UserLastName),localStorage.setItem("email",a.data().UserEmail),alert("Login successful"),window.open("/","_parent")):alert("Incorrect password please try again!"):alert("No User found")}function checkLoggedin(){"yes"==localStorage.getItem("userloggedin")&&(alert("Sorry, but you are already logged in!!"),window.open("/","_parent"))}document.querySelector(".loginbtn").addEventListener("click",()=>{null!=emailbox.value&&null!=passwordbox.value?LoginUser(emailbox.value,passwordbox.value):alert("Please make sure all the fields are filled!!")}),window.onload=checkLoggedin